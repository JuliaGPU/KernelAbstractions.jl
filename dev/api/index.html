<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · KernelAbstractions.jl</title><link rel="canonical" href="https://juliagpu.github.io/KernelAbstractions.jl/api/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">KernelAbstractions.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../kernels/">Writing kernels</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/memcopy/">Memcopy</a></li><li><a class="tocitem" href="../examples/memcopy_static/">Memcopy with static NDRange</a></li><li><a class="tocitem" href="../examples/naive_transpose/">Naive Transpose</a></li><li><a class="tocitem" href="../examples/performance/">Measuring performance</a></li><li><a class="tocitem" href="../examples/matmul/">Matmul</a></li></ul></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#api_kernel_language-1"><span>Kernel language</span></a></li><li><a class="tocitem" href="#Host-interface-1"><span>Host interface</span></a></li><li><a class="tocitem" href="#Internal-1"><span>Internal</span></a></li></ul></li><li><span class="tocitem">Extras</span><ul><li><a class="tocitem" href="../extras/unrolling/">Unroll macro</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/master/docs/src/api.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API-1"><a class="docs-heading-anchor" href="#API-1">API</a><a class="docs-heading-anchor-permalink" href="#API-1" title="Permalink"></a></h1><h2 id="api_kernel_language-1"><a class="docs-heading-anchor" href="#api_kernel_language-1">Kernel language</a><a class="docs-heading-anchor-permalink" href="#api_kernel_language-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="KernelAbstractions.@kernel" href="#KernelAbstractions.@kernel"><code>KernelAbstractions.@kernel</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>@kernel function f(args) end</p><p>Takes a function definition and generates a Kernel constructor from it. The enclosed function is allowed to contain kernel language constructs. In order to call it the kernel has first to be specialized on the backend and then invoked on the arguments.</p><p><strong>Kernel language</strong></p><ul><li><a href="#KernelAbstractions.@Const"><code>@Const</code></a></li><li><a href="#KernelAbstractions.@index"><code>@index</code></a></li><li><a href="#KernelAbstractions.@localmem"><code>@localmem</code></a></li><li><a href="#KernelAbstractions.@private"><code>@private</code></a></li><li><a href="@ref"><code>@uniform</code></a></li><li><a href="#KernelAbstractions.@synchronize"><code>@synchronize</code></a></li><li><a href="@ref"><code>@print</code></a></li></ul><p><strong>Example:</strong></p><p>@kernel function vecadd(A, @Const(B))     I = @index(Global)     @inbounds A[I] += B[I] end</p><p>A = ones(1024) B = rand(1024) event = vecadd(CPU(), 64)(A, B, ndrange=size(A)) wait(event)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL17-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KernelAbstractions.@Const" href="#KernelAbstractions.@Const"><code>KernelAbstractions.@Const</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>@Const(A)</p><p><code>@Const</code> is an argument annotiation that asserts that the memory reference by <code>A</code> is both not written to as part of the kernel and that it does not alias any other memory in the kernel.</p><div class="admonition is-danger"><header class="admonition-header">Danger</header><div class="admonition-body"><p>Violating those constraints will lead to arbitrary behaviour.</p></div></div><p>as an example given a kernel signature <code>kernel(A, @Const(B))</code>, you are not allowed to call the kernel with <code>kernel(A, A)</code> or <code>kernel(A, view(A, :))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL51-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KernelAbstractions.@index" href="#KernelAbstractions.@index"><code>KernelAbstractions.@index</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@index</code></pre><p>The <code>@index</code> macro can be used to give you the index of a workitem within a kernel function. It supports both the production of a linear index or a cartesian index. A cartesian index is a general N-dimensional index that is derived from the iteration space.</p><p><strong>Index granularity</strong></p><ul><li><code>Global</code>: Used to access global memory.</li><li><code>Group</code>: The index of the <code>workgroup</code>.</li><li><code>Local</code>: The within <code>workgroup</code> index.</li></ul><p><strong>Index kind</strong></p><ul><li><code>Linear</code>: Produces an <code>Int64</code> that can be used to linearly index into memory.</li><li><code>Cartesian</code>: Produces a <code>CartesianIndex{N}</code> that can be used to index into memory.</li><li><code>NTuple</code>: Produces a <code>NTuple{N}</code> that can be used to index into memory.</li></ul><p>If the index kind is not provided it defaults to <code>Linear</code>, this is suspect to change.</p><p><strong>Examples</strong></p><pre><code class="language-julia">@index(Global, Linear)
@index(Global, Cartesian)
@index(Local, Cartesian)
@index(Group, Linear)
@index(Local, NTuple)
@index(Global)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL258-L289">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KernelAbstractions.@localmem" href="#KernelAbstractions.@localmem"><code>KernelAbstractions.@localmem</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@localmem T dims</code></pre><p>Declare storage that is local to a workgroup.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL131-L135">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KernelAbstractions.@private" href="#KernelAbstractions.@private"><code>KernelAbstractions.@private</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@private T dims</code></pre><p>Declare storage that is local to each item in the workgroup. This can be safely used across <a href="#KernelAbstractions.@synchronize"><code>@synchronize</code></a> statements. On a CPU, this will allocate additional implicit dimensions to ensure correct localization.</p><p>For storage that only persists between <code>@synchronize</code> statements, an <code>MArray</code> can be used instead.</p><p>See also <a href="@ref"><code>@uniform</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL145-L156">source</a></section><section><div><pre><code class="language-none">@private mem = 1</code></pre><p>Creates a private local of <code>mem</code> per item in the workgroup. This can be safely used across <a href="#KernelAbstractions.@synchronize"><code>@synchronize</code></a> statements.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL166-L171">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KernelAbstractions.@synchronize" href="#KernelAbstractions.@synchronize"><code>KernelAbstractions.@synchronize</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@synchronize()</code></pre><p>After a <code>@synchronize</code> statement all read and writes to global and local memory from each thread in the workgroup are visible in from all other threads in the workgroup.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL186-L192">source</a></section><section><div><pre><code class="language-none">@synchronize(cond)</code></pre><p>After a <code>@synchronize</code> statement all read and writes to global and local memory from each thread in the workgroup are visible in from all other threads in the workgroup. <code>cond</code> is not allowed to have any visible sideffects.</p><p><strong>Platform differences</strong></p><ul><li><code>GPU</code>: This synchronization will only occur if the <code>cond</code> evaluates.</li><li><code>CPU</code>: This synchronization will always occur.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL199-L209">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>groupsize</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Host-interface-1"><a class="docs-heading-anchor" href="#Host-interface-1">Host interface</a><a class="docs-heading-anchor-permalink" href="#Host-interface-1" title="Permalink"></a></h2><h2 id="Internal-1"><a class="docs-heading-anchor" href="#Internal-1">Internal</a><a class="docs-heading-anchor-permalink" href="#Internal-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="KernelAbstractions.Kernel" href="#KernelAbstractions.Kernel"><code>KernelAbstractions.Kernel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Kernel{Device, WorkgroupSize, NDRange, Func}</code></pre><p>Kernel closure struct that is used to represent the device kernel on the host. <code>WorkgroupSize</code> is the number of workitems in a workgroup.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/KernelAbstractions.jl/blob/68c23beec1b4723d2527d186c55e30e7d6074ba6/src/KernelAbstractions.jl#LL368-L374">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>KernelAbstractions.partition</code>. Check Documenter&#39;s build log for details.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/matmul/">« Matmul</a><a class="docs-footer-nextpage" href="../extras/unrolling/">Unroll macro »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 21 July 2022 19:06">Thursday 21 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
